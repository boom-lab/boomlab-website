<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2023-10-02T19:08:40+00:00</updated><id>/feed.xml</id><title type="html">nicholson boom-lab</title><subtitle>The Biogeochemical Ocean Observing and Modeling Lab at the Woods Hole Oeanographic Institution</subtitle><entry><title type="html">Running Jupyter Notebooks on Poseidon</title><link href="/2023/10/02/poseidon-jupyter.html" rel="alternate" type="text/html" title="Running Jupyter Notebooks on Poseidon" /><published>2023-10-02T00:00:00+00:00</published><updated>2023-10-02T19:07:57+00:00</updated><id>/2023/10/02/poseidon-jupyter</id><content type="html" xml:base="/2023/10/02/poseidon-jupyter.html"><![CDATA[<h1 id="running-jupyter-notebooks-remotely-on-poseidon">Running Jupyter Notebooks Remotely on Poseidon</h1>
<p>Based on <a href="https://alexanderlabwhoi.github.io/post/2019-03-08_jpn_slurm/">this blog post</a> from the Alexander Lab.</p>

<h3 id="1-connect-to-poseidon">1: Connect to Poseidon</h3>
<p>Open a Terminal window on your local machine and type:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colette<span class="nv">$ </span>ssh &lt;whoi.ID&gt;@poseidon.whoi.edu
</code></pre></div></div>

<h3 id="2-module-load-anaconda">2. Module load Anaconda</h3>
<p>To use conda or any other software on Poseidon, you need to load the associated module first. The anaconda3/2021.11 module contains a recent version of conda. The anaconda/5.1 module contains a much older version of conda, which will make solving environments and adding packages extremely slow.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>colette.kelly@poseidon-l2 ~]<span class="nv">$ </span>module load anaconda3/2021.11
</code></pre></div></div>

<h3 id="3-activate-conda-environment">3. Activate conda environment</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>colette.kelly@poseidon-l2 ~]<span class="nv">$ </span><span class="nb">source </span>activate &lt;env-name&gt;
</code></pre></div></div>

<h3 id="4-start-interactive-session-on-a-compute-node">4. Start interactive session on a compute node</h3>
<p>You need at least 1 GB memory to work with data from one float; more (2 GB+) for working with a region’s worth. The session will time out if you go over the requested memory.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>conda-env<span class="o">)</span> srun <span class="nt">-N</span> 1 <span class="nt">-n</span> 1 <span class="nt">--mem</span><span class="o">=</span>1000 <span class="nt">--time</span><span class="o">=</span>00:30:00 <span class="nt">--pty</span> bash
</code></pre></div></div>

<h3 id="5-run-export-xdg_runtime_dir">5. run “export XDG_RUNTIME_DIR=”</h3>
<p>You should only need to do this once:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>colette.kelly@pn026 ~]<span class="nv">$ </span><span class="nb">export </span><span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span><span class="s2">""</span>
</code></pre></div></div>

<h3 id="6-launch-jupyter-notebook-without-a-browser-window">6. Launch Jupyter Notebook without a browser window</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>colette.kelly@pn026 ~]<span class="nv">$ </span>jupyter notebook <span class="nt">--no-browser</span> <span class="nt">--port</span><span class="o">=</span>8888
</code></pre></div></div>

<h3 id="7-create-an-ssh-tunnel">7. Create an SSH tunnel</h3>
<p>Open a new Terminal window on your local machine and type the following. Replace “pn026” with whatever node the interactive session is running on.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colette<span class="nv">$ </span>ssh <span class="nt">-t</span> <span class="nt">-t</span> &lt;whoi.ID&gt;@poseidon.whoi.edu <span class="nt">-L</span> 8888:localhost:8888 ssh pn026 <span class="nt">-L</span> 8888:localhost:8888
</code></pre></div></div>

<h3 id="8-open-jupyter-notebook-in-a-browser-window">8. Open Jupyter Notebook in a browser window</h3>
<p>Copy-past the url that begins with “http://localhost:8888/tree?token=” into a browser window. Or,
if Jupyter passwork is configured, just enter “localhost:8888” in a browser window.</p>

<p>You can set configure a Jupyter password by entering the following in a terminal:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupyter notebook password
</code></pre></div></div>

<p>You’ll need to restart your Jupyter Notebook session to be able to use the new password.</p>

<h3 id="9-shut-down-jupyter-notebook">9. Shut down Jupyter Notebook</h3>
<p>Make sure you shut down the Jupyter Notebook (either control-C in Terminal or with the Jupyter GUI), otherwise you might run into issues re-opening a port.</p>]]></content><author><name>colette-kelly</name></author><category term="lab," /><category term="how-to," /><category term="computing" /><summary type="html"><![CDATA[Running Jupyter Notebooks Remotely on Poseidon Based on this blog post from the Alexander Lab.]]></summary></entry><entry><title type="html">Shared HPC network drive</title><link href="/2023/02/23/vast-howto.html" rel="alternate" type="text/html" title="Shared HPC network drive" /><published>2023-02-23T00:00:00+00:00</published><updated>2023-10-02T19:07:57+00:00</updated><id>/2023/02/23/vast-howto</id><content type="html" xml:base="/2023/02/23/vast-howto.html"><![CDATA[<h1 id="storage-on-the-whoi-vast-drive">Storage on the WHOI VAST drive</h1>
<p>Our lab has 100 Tb dedicated space on the WHOI VAST SSD storage drive. Permissions for current lab members should be in place, but contact Roo if you need access</p>

<h2 id="connecting-to-vast">Connecting to VAST</h2>
<h3 id="option-1-smb-share">Option 1: smb share</h3>
<p>You can directly mount the shared drive to your laptop. MacOS instructions below</p>

<ol>
  <li>With Finder open, <kbd>Ctrl</kbd>+<kbd>k</kbd> to “Connect to Server”</li>
  <li>server address: <code class="language-plaintext highlighter-rouge">smb://vast:/proj/boom</code></li>
  <li>Once mounted, the volume is accessible directly at <code class="language-plaintext highlighter-rouge">/Volumes/boom/</code></li>
</ol>

<h3 id="option-2-from-poseidon">Option 2: from Poseidon</h3>
<ol>
  <li>ssh to <code class="language-plaintext highlighter-rouge">yourusername@poseidon.whoi.edu</code></li>
  <li><code class="language-plaintext highlighter-rouge">cd /proj/boom</code>
*probably need to be inside WHOI firewall
Also, many useful datasets (era5, cmip6, etc.) are available on <code class="language-plaintext highlighter-rouge">/proj/cmip6/data</code></li>
</ol>

<h3 id="option-3-globus">Option 3: Globus</h3>

<p><a href="https://whoi-it.whoi.edu/globus-file-transfer-at-whoi/">Overview of Globus @ WHOI</a> - Basically you log into Globus via <a href="https://app.globus.org"></a> with your WHOI account, then search for and connect to the “WHOI Vast Proj Space” collection - you’ll see the boom directory and other Vast proj directories within and can connect and transfer between any that you have permissions for.</p>

<h2 id="organization">Organization</h2>
<p>We are just setting this up, so the below may change…</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── data
│   ├── gdac
│   │   ├── aoml  [8570 entries exceeds filelimit, not opening dir]
│   │   ├── bodc
│   │   ├── coriolis
│   │   ├── csio
│   │   ├── csiro
│   │   ├── incois
│   │   ├── jma
│   │   ├── kma
│   │   ├── kordi
│   │   ├── meds
│   │   └── nmdis
│   └── osu
│       └── orca.science.oregonstate.edu
│           └── data
│               └── 1x2
│                   └── monthly
│                       └── cafe.modis.r2018
│                           └── hdf  [20 entries exceeds filelimit, not opening dir]
|    └── **add new datasets here...**
└── users
    └── dnicholson
    └── **create your dir here...**

</code></pre></div></div>]]></content><author><name>david-nicholson</name></author><category term="lab," /><category term="how-to," /><category term="computing" /><summary type="html"><![CDATA[Storage on the WHOI VAST drive Our lab has 100 Tb dedicated space on the WHOI VAST SSD storage drive. Permissions for current lab members should be in place, but contact Roo if you need access]]></summary></entry><entry><title type="html">Example post 2</title><link href="/2021/09/30/example-post-2.html" rel="alternate" type="text/html" title="Example post 2" /><published>2021-09-30T00:00:00+00:00</published><updated>2023-10-02T19:07:57+00:00</updated><id>/2021/09/30/example-post-2</id><content type="html" xml:base="/2021/09/30/example-post-2.html"><![CDATA[<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>]]></content><author><name>jane-smith</name></author><summary type="html"><![CDATA[Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.]]></summary></entry><entry><title type="html">Example post 1</title><link href="/2019/01/07/example-post-1.html" rel="alternate" type="text/html" title="Example post 1" /><published>2019-01-07T00:00:00+00:00</published><updated>2023-10-02T19:07:57+00:00</updated><id>/2019/01/07/example-post-1</id><content type="html" xml:base="/2019/01/07/example-post-1.html"><![CDATA[<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>]]></content><author><name>sarah-johnson</name></author><category term="biology" /><category term="medicine" /><category term="big data" /><summary type="html"><![CDATA[Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.]]></summary></entry></feed>